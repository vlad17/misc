# File with all my bash definitions. Called indirectly via source in .bashrc
# Don't forget to update dev/misc/fresh-start/.bash_defs too!

alias clipcpy="xclip -in -selection clipboard"
alias clippaste="xclip -out -selection clipboard"
alias gitam="git add . && git commit --amend --no-edit"
alias gits="git status"
alias gitp="git push"
alias gitpf="git push -f"
alias gitpu='git push --set-upstream origin $(git rev-parse --abbrev-ref HEAD)'
alias gitd="git diff"
alias gita="git add ."
alias gitcm="git commit -m"
alias gitmm="git merge master"
alias gitl="git pull"

alias xo="xdg-open"

# Editor assumes there's an emacs daemon running already. This should
# be done on login, check open_txt_info
export ALTERNATE_EDITOR="" # emacs --no-splash -l ~/.emacs.d/init.el
export EDITOR="emacsclient -t --quiet"         # $EDITOR should open in terminal
export VISUAL="emacsclient -c --quiet"         # $VISUAL opens a GUI.
export SUDO_EDITOR="$EDITOR"                   # via sudoedit

alias ged="$EDITOR"

function lmk() {
    start=$(date +%s)
    "$@"
    notify-send "$(echo "$@")" "took $(($(date +%s) - start))s"
}

# alias slack="systemd-run --user --slice user-slack.slice --scope slack"

export PATH="/usr/local/cuda/bin:$PATH"
export LD_LIBRARY_PATH="/usr/local/cuda/lib64/:$LD_LIBRARY_PATH"

if [ -f "$HOME/.twilio.env" ]; then
  source "$HOME/.twilio.env"
fi

if [ -f "$HOME/.cargo/env" ]; then
    source "$HOME/.cargo/env"
fi
# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

export RUST_SRC_PATH=$( echo $(rustc --print sysroot)/lib/rustlib/src/rust/src )

PS1="${debian_chroot:+($debian_chroot)}\t\[\033[01;32m\] \u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ "

# If this is an xterm set the title to user@host:dir (but without the time)
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

export PATH="$HOME/.npm-global/bin:$PATH"
export PATH="$PATH:$HOME/bin"
export PATH="$PATH:$HOME/.local/bin"
source "$HOME/.cargo/env"
source "$HOME/.commacd.bash"